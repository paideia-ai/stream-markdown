#!/bin/sh
set -eu

if ! command -v deno >/dev/null 2>&1; then
  echo "deno command not found; install Deno to run formatting." >&2
  exit 1
fi

echo "Running deno fmt..."
deno fmt

git diff --name-only --diff-filter=ACM | while IFS= read -r file; do
  if [ -n "$file" ]; then
    git add "$file"
  fi
done

exit 0
